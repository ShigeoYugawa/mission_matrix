<!-- complete_colonel/templates/complete_colonel/mission_list.html -->

{# 拡張対応目的で配置（現時点では不要） #}
{% load static %}

<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{{ title }}</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

  {% if commando_mode %}
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
    <style>
      body { font-family: 'Press Start 2P', monospace; background-color: #000; color: #fff; }
      .mission-card { background-color: #222; border: 2px solid #555; }
      .mission-title { color: #fff; font-weight: bold; }
      .btn { border: 2px solid #fff; font-size: 12px; }
      .quote { color: #ff0; font-weight: bold; text-align: center; animation: blink 1s steps(2, start) infinite; }
      .completed-comment { color: #0f0; font-weight: bold; }
      .archive-btn {
        color: #fff;
        font-weight: bold;
        font-size: 14px;
        border: 2px solid #fff;
      }
      .archive-btn:hover {
        color: #ff0; /* 文字色を黄色に */
        border-color: #ff0; /* 枠も黄色に */
        background-color: #222; /* 背景を少し明るく */
      }
      @keyframes blink { 50% { visibility: hidden; } }
    </style>
  {% endif %}
</head>
<body class="container py-4">

  <h1 class="mb-4">{{ title }}</h1>

  {% if quote %}
    <div class="quote mb-4">{{ quote }}</div>
  {% endif %}

  <!-- 新規任務追加フォーム -->
  <form method="post" class="mb-4">
    {% csrf_token %}
    <div class="input-group">
      <input type="text" name="title" class="form-control" placeholder="{{ input_placeholder }}" required>
      <button type="submit" class="btn btn-primary">追加</button>
    </div>
  </form>

  <h2 class="h4 mb-3">{{ list_heading }}</h2>

  {% for mission in missions %}
    <div class="card mb-2 mission-card">
      <div class="card-body d-flex justify-content-between align-items-center">
        <span class="mission-title">
          {{ mission.title }}
          {% if mission.is_completed %}
            <span class="completed-comment ms-2">✅ {{ mission.completed_comment }}</span>
          {% endif %}
        </span>
        <span>
          {% if not mission.is_completed %}
            <a href="{% url 'complete_mission' mission.id %}" class="btn btn-success btn-sm">完了</a>
          {% endif %}
          <a href="{% url 'archive_mission' mission.id %}" class="btn btn-secondary btn-sm">削除(アーカイブ)</a>
        </span>
      </div>
    </div>
  {% empty %}
    <p class="text-muted">現在、任務はありません。</p>
  {% endfor %}

  <a href="{% url 'archived_missions' %}" class="btn archive-btn mt-3">アーカイブリストを見る</a>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
